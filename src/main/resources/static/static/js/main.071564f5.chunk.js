(this["webpackJsonprepayments-client"]=this["webpackJsonprepayments-client"]||[]).push([[0],{193:function(e,a,t){e.exports=t.p+"static/media/logo.b1ce103d.svg"},222:function(e,a,t){e.exports=t(449)},448:function(e,a,t){},449:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(5),s=t.n(l),o=t(39),c=t(59),u=(t(149),t(79)),m=t(193),d=t.n(m),p=u.a.Header,i=function(){return r.a.createElement(p,{className:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{src:d.a,alt:"One Acre Fund Logo"}))),r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/dashboard"},"Dashboard")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/about"},"About"))))},E=(t(250),t(219)),y=(t(70),t(17)),f=function(){return r.a.createElement(E.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(y.a,{type:"primary"},r.a.createElement(o.b,{to:"/"},"Back Home"))})},b=function(){return r.a.createElement("div",{className:"about"},r.a.createElement("h1",null,"About this App"),r.a.createElement("p",null,"App to make loan repayments"),r.a.createElement("p",null,"Version 1.0.0"))},v=function(){return r.a.createElement("main",{className:"home"},r.a.createElement("div",{className:"home__textbox"},r.a.createElement("h1",{className:"home__heading"},r.a.createElement("span",{className:"home__heading--main"},"the portal"),r.a.createElement("span",{className:"home__heading--sub"},"for all repayments")),r.a.createElement(o.b,{to:"/dashboard"},r.a.createElement("button",{className:"home__btn btn btn--white",href:"#"},"get started"))),"}")},h=(t(264),t(27)),R=t(455),O=t(454),I=t(453),S=t(452),g=(t(267),t(218)),T=(t(269),t(81)),x=t(32),A=(t(133),t(33)),C=(t(159),t(111)),k=t(16),N=t.n(k),_=t(28),j=t(29),M=t.n(j),U=t(75),w=t.n(U),D=A.a.Option,P=function(e){var a=Object(n.useState)([]),t=Object(x.a)(a,2),l=t[0],s=t[1],o=Object(n.useState)(!1),c=Object(x.a)(o,2),u=c[0],m=c[1],d=function(){var e=Object(_.a)(N.a.mark((function e(a){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,M.a.get("/api/v1/customers/filter?value=".concat(a));case 3:t=e.sent,n=t.data.data.map((function(e){return{text:e.customerName,value:e.customerId}})),s(n),m(!1);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{showSearch:!0,showArrow:!1,filterOption:!1,placeholder:"Select Customer",onSearch:w()(d,800),onSelect:function(a,t){e.form.setFieldsValue({customerId:t.value})},notFoundContent:u?r.a.createElement(C.a,{size:"small"}):null},l.map((function(e){return r.a.createElement(D,{key:e.value},e.text)})))},L=Object(n.createContext)(),G=Object(n.createContext)(),Y=A.a.Option,F=function(){var e=Object(n.useContext)(L),a=Object(n.useContext)(G),t=e.seasons,l=e.getSeasons,s=a.getSummariesToModify,o=a.loading,c=a.clearPanel;Object(n.useEffect)((function(){l()}),[]);var u=T.a.useForm(),m=Object(x.a)(u,1)[0];return r.a.createElement(T.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{form:m,name:"repayment-upload-form",className:"ant-advanced-search-form",onFinish:function(e){c(),s(e.customerId,e.seasonId,e.amount),m.resetFields()},initialValues:{seasonId:"0"}}),r.a.createElement(T.a.Item,{name:"amount",label:"Amount",rules:[{required:!0,message:"Please enter amount"},{type:"number",min:1,message:"Amount should be greater than zero"}]},r.a.createElement(g.a,{className:"amount",placeholder:"Enter amount"})),r.a.createElement(T.a.Item,{name:"customerId",label:"Customer",rules:[{required:!0,message:"Please select customer"}]},r.a.createElement(P,{form:m})),r.a.createElement(T.a.Item,{name:"seasonId",label:"Season"},r.a.createElement(A.a,null,r.a.createElement(Y,{key:"0",value:"0"},"Select Season"),null!==t&&t.map((function(e){return r.a.createElement(Y,{key:e.seasonId,value:e.seasonId},e.seasonName)})),") }")),r.a.createElement("div",{className:"repay-cta"},r.a.createElement(y.a,{type:"primary",htmlType:"submit",loading:o},"Check"),r.a.createElement(y.a,{style:{marginLeft:"8px"},onClick:function(){m.resetFields()}},"Clear")))},B=(t(142),t(77)),q=function(){var e=Object(n.useContext)(G),a=e.repaymentUploads,t=e.repayDebts,l=[];return a.length>0&&(l=a.map((function(e,a){return{key:a,amount:e.amount,customerId:e.customerId,seasonId:e.seasonId?e.seasonId:"-"}}))),a.length>0&&r.a.createElement("div",null,r.a.createElement("div",{className:"table-header"},r.a.createElement("p",{style:{fontSize:"1rem"}},"List of Repayment Uploads to be made"),r.a.createElement(y.a,{type:"primary",onClick:function(){return t(a)}},"Submit")),r.a.createElement(B.a,{dataSource:l,columns:[{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Customer ID",dataIndex:"customerId",key:"customerId"},{title:"Season ID",dataIndex:"seasonId",key:"seasonId"}]}))},H=(t(419),t(217)),z=function(){var e=Object(n.useContext)(G),a=e.summariesToModify,t=e.clearProposedChanges,l=e.addToUploads,s=[];null!==a&&(s=a.summariesToUpdate.map((function(e){return{key:e.summary.id,id:e.summary.id,seasonId:e.summary.seasonId,credit:e.summary.totalCredit,repaid:e.summary.totalRepaid,toAdd:e.amountToAdd}})));return r.a.createElement(H.a,{title:"Proposed Changes",centered:!0,visible:null!==a,onOk:function(){null!==a&&l(a.repaymentUpload)},onCancel:function(){return t()},okText:"Add"},null!==a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"changes-header"},r.a.createElement("p",null,r.a.createElement("span",{className:"label"},"Total Amount:")," ",a.repaymentUpload.amount),r.a.createElement("p",null,r.a.createElement("span",{className:"label"},"Customer ID: "),a.repaymentUpload.customerId),a.repaymentUpload.seasonId&&r.a.createElement("p",null,r.a.createElement("span",{className:"label"},"Season ID: "),a.repaymentUpload.seasonId)),r.a.createElement("div",null,r.a.createElement("p",{className:"label"},"Customer Summaries to Update: "),r.a.createElement(B.a,{dataSource:s,columns:[{title:"Summary ID",dataIndex:"id",key:"id"},{title:"Season ID",dataIndex:"seasonId",key:"seasonId"},{title:"Total Credit",dataIndex:"credit",key:"credit"},{title:"Total Repaid",dataIndex:"repaid",key:"repaid"},{title:"Amount To Add",dataIndex:"toAdd",key:"toAdd"}]}))))},V=(t(429),t(213)),J=function(){var e=Object(n.useContext)(G).currentlyMadeRepayments,a=[];return null!==e&&(a=e.map((function(e){var a=e.adjustmentRepayments,t=e.originalRepayment;return{key:t.repaymentId,amount:t.amount,customerId:t.customerId,seasonId:t.seasonId,children:null===a?null:a.map((function(e){return{key:e.repaymentId,amount:e.amount,customerId:e.customerId,seasonId:e.seasonId}}))}}))),null!==e&&r.a.createElement("div",{style:{marginTop:"3rem"}},r.a.createElement(V.a,{orientation:"left"},"List of Repayments made"),r.a.createElement(B.a,{columns:[{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Customer ID",dataIndex:"customerId",key:"customerId"},{title:"Season ID",dataIndex:"seasonId",key:"seasonId"}],dataSource:a}))},W=(t(187),t(61)),K=(t(188),t(21)),$=(t(450),t(118)),Q=(t(433),t(119)),X=function(){return r.a.createElement("div",null,r.a.createElement(W.a,{gutter:16},r.a.createElement(K.a,{span:8},r.a.createElement($.a,null,r.a.createElement(Q.a,{title:"Number of Customers",value:5e3,valueStyle:{color:"#3c917d"}}))),r.a.createElement(K.a,{span:8},r.a.createElement($.a,null,r.a.createElement(Q.a,{title:"Total Repayment Uploads",value:1e4,valueStyle:{color:"#3c917d"}}))),r.a.createElement(K.a,{span:8},r.a.createElement($.a,null,r.a.createElement(Q.a,{title:"Total Number of Repayments made",value:12500,valueStyle:{color:"#3c917d"}})))))},Z=u.a.Sider,ee=u.a.Content,ae=function(){return r.a.createElement(u.a,null,r.a.createElement(Z,{className:"sider",collapsible:!0,breakpoint:"md"},r.a.createElement(h.a,{className:"menu",theme:"light",mode:"inline",defaultSelectedKeys:["Dashboard"]},r.a.createElement(h.a.Item,{key:"Dashboard"},r.a.createElement(R.a,null),r.a.createElement("span",null,"Dashboard")),r.a.createElement(h.a.Item,{key:"Requests"},r.a.createElement(O.a,null),r.a.createElement("span",null,"Repayments")),r.a.createElement(h.a.Item,{key:"Departments"},r.a.createElement(I.a,null),r.a.createElement("span",null,"Customers")),r.a.createElement(h.a.Item,{key:"Settings"},r.a.createElement(S.a,null),r.a.createElement("span",null,"Seasons")))),r.a.createElement(ee,{className:"content"},r.a.createElement(X,null),r.a.createElement("div",{className:"repayment-area"},r.a.createElement("h1",null,"Repayments Panel"),r.a.createElement("div",{className:"repayment-upload"},r.a.createElement(F,null),r.a.createElement(q,null)),r.a.createElement(J,null)),r.a.createElement(z,null)))},te=t(19),ne=function(e,a){switch(a.type){case"GET_SEASONS":return Object(te.a)({},e,{seasons:a.payload});case"SEASON_ERROR":return Object(te.a)({},e,{error:a.payload});default:return e}},re=function(e){var a=Object(n.useReducer)(ne,{seasons:null,error:null}),t=Object(x.a)(a,2),l=t[0],s=t[1],o=function(){var e=Object(_.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/v1/seasons");case 3:a=e.sent,s({type:"GET_SEASONS",payload:a.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:"SEASON_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(L.Provider,{value:{seasons:l.seasons,error:l.error,getSeasons:o}},e.children)},le=Object(n.createContext)(),se=function(e,a){switch(a.type){case"FIND_CUSTOMER":return Object(te.a)({},e,{fetchedCustomers:a.payload,loading:!1});case"GET_CUSTOMER":return Object(te.a)({},e,{customers:a.payload,loading:!1});case"CUSTOMER_ERROR":return Object(te.a)({},e,{error:a.payload});case"SET_LOADING":return Object(te.a)({},e,{loading:!0});default:return e}},oe=function(e){var a=Object(n.useReducer)(se,{customers:null,fetchedCustomers:null,loading:!1,error:null}),t=Object(x.a)(a,2),l=t[0],s=t[1],o=function(){var e=Object(_.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.prev=1,e.next=4,M.a.get("/api/v1/customers/");case 4:a=e.sent,s({type:"GET_CUSTOMER",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"CUSTOMER_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(_.a)(N.a.mark((function e(a){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.prev=1,e.next=4,M.a.get("/api/v1/customers/?q=".concat(a));case 4:t=e.sent,s({type:"FIND_CUSTOMER",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"CUSTOMER_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){return s({type:"SET_LOADING"})};return r.a.createElement(le.Provider,{value:{customers:l.customers,fetchedCustomers:l.fetchedCustomers,error:l.error,findCustomer:c,getAllCustomers:o}},e.children)},ce=t(220),ue=function(e,a){switch(a.type){case"GET_CUSTOMER_SUMMARY":return Object(te.a)({},e,{summariesToModify:a.payload,loading:!1});case"CLEAR_PROPOSED_CHANGES":return Object(te.a)({},e,{summariesToModify:null});case"ADD_TO_UPLOADS":return Object(te.a)({},e,{repaymentUploads:[a.payload].concat(Object(ce.a)(e.repaymentUploads))});case"GET_REPAYMENTS":return Object(te.a)({},e,{allRepayments:a.payload});case"REPAY_DEBTS":return Object(te.a)({},e,{currentlyMadeRepayments:a.payload});case"REPAYMENT_ERROR":return Object(te.a)({},e,{error:a.payload});case"SET_LOADING":return Object(te.a)({},e,{loading:!0});case"CLEAR_PANEL":return Object(te.a)({},e,{repaymentUploads:[],currentlyMadeRepayments:null});default:return e}},me=function(e){var a=Object(n.useReducer)(ue,{summariesToModify:null,repaymentUploads:[],currentlyMadeRepayments:null,allRepayments:null,totalRepaymentUploads:[],loading:!1,error:null}),t=Object(x.a)(a,2),l=t[0],s=t[1],o=function(){var e=Object(_.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/v1/repayments");case 3:a=e.sent,s({type:"GET_REPAYMENTS",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:"REPAYMENT_ERROR",payload:e.t0.response.data.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(_.a)(N.a.mark((function e(a){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,M.a.post("/api/v1/repayments/repay",a,t);case 4:n=e.sent,s({type:"REPAY_DEBTS",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"REPAYMENT_ERROR",payload:e.t0.response.data.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(_.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/api/v1/repayments/uploads");case 3:a=e.sent,s({type:"GET_TOTAL_REPAYMENTS",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:"REPAYMENT_ERROR",payload:e.t0.response.data.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(_.a)(N.a.mark((function e(a,t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.prev=1,e.next=4,M.a.get("/api/v1/repayments//proposed-changes?customerId=".concat(a,"&amount=").concat(n,"&seasonId=").concat(t));case 4:r=e.sent,s({type:"GET_CUSTOMER_SUMMARY",payload:r.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"REPAYMENT_ERROR",payload:e.t0.response.data.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a,t,n){return e.apply(this,arguments)}}(),d=function(){s({type:"CLEAR_PROPOSED_CHANGES"})},p=function(){s({type:"SET_LOADING"})};return r.a.createElement(G.Provider,{value:{repaymentUploads:l.repaymentUploads,summariesToModify:l.summariesToModify,currentlyMadeRepayments:l.currentlyMadeRepayments,allRepayments:l.allRepayments,totalRepaymentUploads:l.totalRepaymentUploads,loading:l.loading,error:l.error,repayDebts:c,getAllRepayments:o,addToUploads:function(e){s({type:"ADD_TO_UPLOADS",payload:e}),d()},getSummariesToModify:m,getTotalRepaymentUploads:u,clearProposedChanges:d,clearPanel:function(){s({type:"CLEAR_PANEL"})}}},e.children)};t(448);var de=function(){return r.a.createElement(re,null,r.a.createElement(oe,null,r.a.createElement(me,null,r.a.createElement(o.a,null,r.a.createElement(i,null),r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/dashboard",component:ae}),r.a.createElement(c.a,{exact:!0,path:"/about",component:b}),r.a.createElement(c.a,{exact:!0,path:"/",component:v}),r.a.createElement(c.a,{component:f}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[222,1,2]]]);
//# sourceMappingURL=main.071564f5.chunk.js.map